<script>
(function() {
  'use strict';
  var sectionTabs = {
    'education': 'Education',
    'work-experience': 'Experience',
    'selected-projects-and-research': 'Research',
    'personal-projects': 'Projects',
    'finance-projects': 'Finance',
    'publications': 'Publications',
    'presentations': 'Presentations',
    'sample-research-poster': 'Posters',
    'sample-industry-poster': 'Posters'
  };
  function initTabs() {
    var sections = {};
    var tabLabels = new Set();
    Object.keys(sectionTabs).forEach(function(sectionId) {
      var section = document.getElementById(sectionId);
      if (section) {
        var tabLabel = sectionTabs[sectionId];
        tabLabels.add(tabLabel);
        var container = section.closest('.container');
        if (container) {
          if (!sections[tabLabel]) {
            sections[tabLabel] = [];
          }
          sections[tabLabel].push(container);
        }
      }
    });
    if (Object.keys(sections).length === 0) {
      return;
    }
    if (sections['Posters'] && sections['Posters'].length > 1) {
      var postersContainers = sections['Posters'];
      var firstPoster = postersContainers[0];
      var parentContainer = firstPoster.parentElement;
      var postersWrapper = document.createElement('div');
      postersWrapper.className = 'container section-in-tabs';
      postersWrapper.setAttribute('data-tab-section', 'Posters');
      postersWrapper.style.display = 'none';
      parentContainer.insertBefore(postersWrapper, firstPoster);
      postersContainers.forEach(function(container) {
        postersWrapper.appendChild(container);
      });
      sections['Posters'] = [postersWrapper];
    }
    Object.keys(sections).forEach(function(tabLabel) {
      sections[tabLabel].forEach(function(container) {
        container.classList.add('section-in-tabs');
        container.setAttribute('data-tab-section', tabLabel);
        container.style.display = 'none';
      });
    });
    var aboutMe = document.getElementById('about-me');
    var mainContent = aboutMe ? aboutMe.closest('main') : document.querySelector('main');
    if (!mainContent) {
      return;
    }
    var navContainer = document.createElement('div');
    navContainer.className = 'main-nav-tabs';
    var navList = document.createElement('div');
    navList.className = 'tabs-nav';
    var tabLabelsArray = Array.from(tabLabels).sort();
    tabLabelsArray.forEach(function(tabLabel, index) {
      var button = document.createElement('button');
      button.className = 'tab-button' + (index === 0 ? ' active' : '');
      button.textContent = tabLabel;
      button.setAttribute('data-tab', tabLabel);
      button.setAttribute('type', 'button');
      button.addEventListener('click', function() {
        switchTab(tabLabel);
      });
      navList.appendChild(button);
    });
    navContainer.appendChild(navList);
    var aboutMeContainer = aboutMe ? aboutMe.closest('.container') : null;
    if (aboutMeContainer && aboutMeContainer.nextSibling) {
      aboutMeContainer.parentElement.insertBefore(navContainer, aboutMeContainer.nextSibling);
    } else if (mainContent.firstChild) {
      mainContent.insertBefore(navContainer, mainContent.firstChild);
    } else {
      mainContent.appendChild(navContainer);
    }
    if (tabLabelsArray.length > 0) {
      switchTab(tabLabelsArray[0], false);
    }
  }
  function switchTab(tabLabel, animate) {
    if (animate === undefined) animate = true;
    document.querySelectorAll('.tab-button').forEach(function(btn) {
      btn.classList.remove('active');
      if (btn.getAttribute('data-tab') === tabLabel) {
        btn.classList.add('active');
      }
    });
    document.querySelectorAll('.section-in-tabs').forEach(function(section) {
      section.classList.remove('active');
      section.style.display = 'none';
    });
    var activeSections = document.querySelectorAll('.section-in-tabs[data-tab-section="' + tabLabel + '"]');
    activeSections.forEach(function(section) {
      section.classList.add('active');
      section.style.display = 'block';
    });
    if (animate) {
      var navContainer = document.querySelector('.main-nav-tabs');
      if (navContainer) {
        navContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }
  }
  function tryInit() {
    if (document.getElementById('about-me') && document.querySelector('main')) {
      initTabs();
    } else {
      setTimeout(tryInit, 100);
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', tryInit);
  } else {
    tryInit();
  }
})();
</script>

